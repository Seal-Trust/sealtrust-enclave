# Nautilus Enclave Configuration
# Copy this file to .env and fill in your values
# DO NOT commit .env to git!

# ========================================
# Server Configuration
# ========================================

# Port for HTTP server
SERVER_PORT=3000

# Bind address (use 0.0.0.0 for Docker, 127.0.0.1 for local)
BIND_ADDRESS=127.0.0.1

# ========================================
# Enclave Mode
# ========================================

# Development mode (runs without Nitro Enclave hardware)
# Set to 'true' for local testing, 'false' for AWS production
DEV_MODE=true

# ========================================
# Logging
# ========================================

# Log level: trace, debug, info, warn, error
RUST_LOG=info

# ========================================
# Network Whitelist
# ========================================

# File path for allowed endpoints configuration
# This restricts which external URLs the enclave can access
ALLOWED_ENDPOINTS_PATH=allowed_endpoints.yaml

# ========================================
# AWS Configuration (Production Only)
# ========================================

# Only needed when deploying to AWS Nitro Enclave
# Leave empty for local development

# AWS Region
# AWS_REGION=us-east-1

# CloudWatch log group
# LOG_GROUP=/aws/ec2/nautilus-enclave

# ========================================
# Frontend Integration
# ========================================

# CORS allowed origins (comma-separated)
# For local dev: http://localhost:3001
# For production: https://yourdomain.com
CORS_ORIGINS=http://localhost:3001,http://localhost:3000

# ========================================
# Health Check
# ========================================

# Health check endpoint path
HEALTH_CHECK_PATH=/health_check

# ========================================
# Enclave Key Management
# ========================================

# In production, enclave generates a new key on each build
# For development, we use a persistent key file

# Path to store/load enclave private key (dev mode only)
ENCLAVE_KEY_PATH=.enclave_key.json

# ========================================
# Performance Tuning
# ========================================

# Maximum request size in bytes (default: 10MB)
MAX_REQUEST_SIZE=10485760

# Request timeout in seconds
REQUEST_TIMEOUT=30

# ========================================
# IMPORTANT NOTES
# ========================================
#
# 1. DEV_MODE=true means:
#    - Runs without AWS Nitro Enclave hardware
#    - Perfect for local testing
#    - Uses file-based key storage
#    - No hardware attestation
#
# 2. DEV_MODE=false means:
#    - Requires AWS Nitro Enclave
#    - Generates ephemeral key in secure enclave
#    - Provides hardware attestation
#    - Production-ready
#
# 3. Local Testing Workflow:
#    - Set DEV_MODE=true
#    - Run: cargo run --release
#    - Test with curl or frontend
#    - Verify signature verification works
#
# 4. AWS Deployment Workflow:
#    - Set DEV_MODE=false
#    - Build Docker image
#    - Convert to .eif (Enclave Image Format)
#    - Deploy to EC2 with Nitro Enclaves
#
